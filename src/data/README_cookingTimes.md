# Динамическое время варки яиц

## Обзор

Система динамического расчета времени варки яиц учитывает два параметра:
1. **Размер яйца** (C0, C1, C2)
2. **Степень готовности** (всмятку, в мешочек, вкрутую)

## Структура данных

### Таблица времени варки

Время варки хранится в структуре `COOKING_TIMES`:

```javascript
COOKING_TIMES = {
  doneness: {
    size: seconds
  }
}
```

### Пример данных

```javascript
soft: {
  C0: 270,  // 4.5 мин
  C1: 240,  // 4 мин
  C2: 210,  // 3.5 мин
}
```

## Функции

### `getCookingTime(doneness, size)`

Возвращает время варки в секундах.

**Параметры:**
- `doneness` (string): 'soft', 'medium', 'hard'
- `size` (string|null): 'C0', 'C1', 'C2' или null

**Возвращает:** (number) Время в секундах

**Пример:**
```javascript
const time = getCookingTime('soft', 'C1');
// Вернет 240 (4 минуты)
```

### `getCookingTimeRange(doneness, size)`

Возвращает строку со временем для отображения в UI.

**Параметры:**
- `doneness` (string): 'soft', 'medium', 'hard'
- `size` (string|null): 'C0', 'C1', 'C2' или null

**Возвращает:** (string) Время, например "6 мин"

**Пример:**
```javascript
const range = getCookingTimeRange('medium', 'C1');
// Вернет "6 мин"
```

### `formatCookingTime(seconds)`

Форматирует секунды в читаемую строку.

**Параметры:**
- `seconds` (number): Количество секунд

**Возвращает:** (string) Форматированное время, например "4 мин 30 сек"

**Пример:**
```javascript
const formatted = formatCookingTime(270);
// Вернет "4 мин 30 сек"
```

## Интеграция

### В EggView

```javascript
const cookingTime = useMemo(() => {
  return getCookingTime(selectedDoneness, selectedSize);
}, [selectedDoneness, selectedSize]);

<CircularTimer initTime={cookingTime} />
```

### В DonenessSelector

```javascript
const donenessOptions = useMemo(() => [
  {
    id: 'soft',
    name: 'Всмятку',
    time: getCookingTimeRange('soft', selectedSize)
  },
  // ...
], [selectedSize]);
```

## Логика работы

1. **Начальное состояние**: Таймер показывает время по умолчанию (средний размер)
2. **Выбор размера**: Время пересчитывается с учетом размера яйца
3. **Выбор готовности**: Время меняется в соответствии с типом варки
4. **Запуск таймера**: Фиксируется текущее рассчитанное время
5. **Изменение настроек**: Если таймер в состоянии 'idle', время обновляется автоматически

## Примеры времени варки

### Всмятку (жидкий желток)
- C0 (очень крупные): 4.5 мин (270 сек)
- C1 (крупные): 4 мин (240 сек)
- C2 (средние): 3.5 мин (210 сек)

### В мешочек (густой желток)
- C0 (очень крупные): 6.5 мин (390 сек)
- C1 (крупные): 6 мин (360 сек)
- C2 (средние): 5.5 мин (330 сек)

### Вкрутую (твердый желток)
- C0 (очень крупные): 10 мин (600 сек)
- C1 (крупные): 9 мин (540 сек)
- C2 (средние): 8 мин (480 сек)

## Примечания

- Если размер не выбран, используется время по умолчанию (средние значения)
- Время может быть скорректировано в файле `cookingTimes.js`
- Все времена рассчитаны для яиц, заложенных в кипящую воду

